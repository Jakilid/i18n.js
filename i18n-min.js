/* i18n.js version 1.0
 * Copyright (c) 2015 Farshad Shahbazi
 * Released under the MIT license
*/
function i18n(a){if(i18n._singletonInstance)return i18n._singletonInstance;i18n._singletonInstance=this;this.settings=$.extend({baseLocale:"en-US",locale:"en-US",localePrefix:"locale/",callBack:null},a);this.lastStyleId;this.lastLangScrId;this.currentLang=this.settings.baseLocale;a=$("html");0!==a.length&&a.attr("data-dir",a.attr("dir")?a.attr("dir"):"ltr");this.changeTranslation(this.settings.locale)||setTimeout(this.translateCompleted,0)} i18n.prototype.tr=function(a,c){if("object"!==typeof i18n.lang||"en"==i18n.lang.langCode.toLowerCase())return a;if("undefined"===typeof c)var b=i18n.lang.context[a];else"undefined"!==typeof i18n.lang.context[c]&&(b=i18n.lang.context[c][a]);return"undefined"===typeof b?a.toString():b.toString()};i18n.prototype.toLocalNumber=function(a){return"object"!==typeof i18n.lang||"function"!==typeof i18n.lang.toLocalNumber?a:i18n.lang.toLocalNumber(a)}; i18n.prototype.toLocalDateStr=function(a){return"object"!==typeof i18n.lang||"function"!==typeof i18n.lang.toLocalDateStr?a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate():i18n.lang.toLocalDateStr(a)};i18n.prototype.currentLanguage=function(){return this.currentLang};i18n.prototype.localeDirection=function(){try{return i18n.lang.direction.toLowerCase()}catch(a){return"ltr"}}; i18n.prototype.changeTranslation=function(a){if(this.currentLang==a)return!1;i18n.exec("unload");if(a==this.settings.baseLocale)return i18n.clearLastStyle(),i18n.clearLastLangScr(),delete i18n.lang,$("html").attr("dir",$("html").attr("data-dir")),this.currentLang=a,this.translateCompleted(),!0;i18n.addScript(this.settings.localePrefix+a+"/"+a+".js",function(){i18n.exec("load");i18n.clearLastLangScr($(this).attr("id"));var c=$("html");0!==c.length&&c.attr("dir",i18n.lang.direction);"undefined"!==typeof i18n.lang.style&& 0!==c.length?i18n.addStyle(i18n._singletonInstance.settings.localePrefix+a+"/"+i18n.lang.style,function(){i18n.clearLastStyle($(this).attr("id"));i18n._singletonInstance.translateCompleted()}):(i18n.clearLastStyle(),i18n._singletonInstance.translateCompleted())});this.currentLang=a;return!0};i18n.prototype.translateCompleted=function(){"function"===typeof i18n._singletonInstance.settings.callBack&&i18n._singletonInstance.settings.callBack()}; i18n.exec=function(a){if("object"!==typeof i18n.lang)return!1;if("function"===typeof i18n.lang[a])return i18n.lang[a]()};i18n.clearLastStyle=function(a){i18n._singletonInstance.lastStyleId&&$("#"+i18n._singletonInstance.lastStyleId).remove();i18n._singletonInstance.lastStyleId=a};i18n.clearLastLangScr=function(a){i18n._singletonInstance.lastLangScrId&&$("#"+i18n._singletonInstance.lastLangScrId).remove();i18n._singletonInstance.lastLangScrId=a}; i18n.addStyle=function(a,c){var b=document.createElement("link");b.href=a;b.rel="stylesheet";b.id=Math.floor(1E4*Math.random());b.type="text/css";b.onload="function"===typeof c?c:null;(document.head||document.documentElement).appendChild(b)};i18n.addScript=function(a,c){var b=document.createElementNS("http://www.w3.org/1999/xhtml","script");b.src=a;b.id=Math.floor(1E4*Math.random());b.onload="function"===typeof c?c:null;(document.head||document.documentElement).appendChild(b)};